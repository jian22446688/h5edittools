webpackJsonp([3],{"2kqF":function(t,e){},"4Kxo":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),n=a("T452"),o={name:"PreviewPage",data:function(){return{host:n.a}},props:{elems:{type:Array},editorElement:{type:Object}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-previewpage"},[a("div",{staticClass:"page-bg"}),t._v(" "),t._l(t.elems,function(e){return["text"===e.type?a("div",{staticClass:"page-preview-con"},[a("div",{staticStyle:{position:"absolute"},style:{zIndex:e.zindex,top:e.top+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px",fontSize:e.fontSize+"px",textAlign:e.textAlign}},[t._v(t._s(e.text))])]):t._e(),t._v(" "),"pic"===e.type?a("div",{staticClass:"page-preview-con"},[a("div",{staticStyle:{position:"absolute"},style:{zIndex:e.zindex,top:e.top+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px"}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.host+e.imgSrc,alt:""}})])]):t._e()]})],2)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("yxIz")},"data-v-a93c8a60",null).exports,c={name:"page-and-layer",components:{PerviewPage:r},props:[],data:function(){return{curPageActtiv:0,curLayerActtiv:0,isPageActiv:!0,isLayerActiv:!1,isActiv:!0}},computed:{pageList:function(){return this.$store.state.editor.editorTheme.pages},layerList:function(){return this.$store.state.editor.editorPage.elements},curPage:function(){return this.$store.state.editor.editorPage},curLayer:function(){return this.$store.state.editor.editorElement}},created:function(){},mounted:function(){},methods:{onlayer:function(){this.isLayerActiv||(this.isPageActiv=!this.isPageActiv,this.isLayerActiv=!this.isLayerActiv)},onPage:function(){this.isPageActiv||(this.isLayerActiv=!this.isLayerActiv,this.isPageActiv=!this.isPageActiv)},onAddPage:function(){this.$store.commit("ADD_PAGE")},onPageCopy:function(t){var e={this:this,data:t};this.$store.commit("COPY_PAGE",e)},onPageDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"是否删除页面？？？",onOk:function(){e.$store.commit("DELETE_PAGE",t)}})},onPageUp:function(t){this.$store.commit("UP_PAGE",t)},onPageDown:function(t){this.$store.commit("DOWN_PAGE",t)},selectPage:function(t){this.$store.commit("CLEAR_CUR_ELEMENT"),this.curPage!==t&&this.$store.commit("SET_CUR_EDITOR_PAGE",t)},selectLayer:function(t){this.curLayer!==t&&this.$store.commit("SET_CUR_EDITOR_ELEMENT",t)}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%",width:"100%"}},[a("Row",[a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[a("div",{staticClass:"c-left-tab-text",class:{"c-layout-tab-n":!t.isPageActiv,"c-layout-tab-activ":t.isPageActiv},on:{click:t.onPage}},[t._v("\n            页面\n        ")])]),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[a("div",{staticClass:"c-left-tab-text",class:{"c-layout-tab-n":!t.isLayerActiv,"c-layout-tab-activ":t.isLayerActiv},on:{click:t.onlayer}},[t._v("\n            图层\n        ")])])],1),t._v(" "),a("div",{staticClass:"c-left-tab-page custom-scrollbar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isPageActiv,expression:"isPageActiv"}],staticStyle:{width:"100%"}},[a("ul",{staticStyle:{width:"100%","text-align":"center"}},[t._l(t.pageList,function(e,s){return a("li",{key:s,staticStyle:{"margin-top":"0px",padding:"16px"},on:{click:function(a){t.selectPage(e)}}},[a("h2",[t._v(t._s(s+1))]),t._v(" "),a("div",{class:{"page-activ":e===t.curPage},staticStyle:{"padding-top":"8px","padding-bottom":"8px"}},[a("div",{staticClass:"listpage"},[a("PerviewPage",{staticStyle:{"transform-origin":"left top",transform:"scale(0.3947)"},attrs:{elems:e.elements},on:{"update:elems":function(a){t.$set(e,"elements",a)}}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e===t.curPage,expression:"page === curPage"}],staticClass:"listpage-control"},[a("Button",{staticStyle:{padding:"0"},attrs:{type:"text",title:"复制一页"},on:{click:function(a){t.onPageCopy(e)}}},[a("Icon",{attrs:{size:"22",type:"ios-copy"}})],1),t._v(" "),a("Button",{staticStyle:{padding:"0"},attrs:{disabled:1==t.pageList.length,type:"text",title:"删除一页"},on:{click:function(a){t.onPageDelete(e)}}},[a("Icon",{attrs:{size:"22",type:"trash-a"}})],1),t._v(" "),a("Button",{staticStyle:{padding:"0"},attrs:{disabled:0==s,type:"text",title:"上移"},on:{click:function(e){t.onPageUp(s)}}},[a("Icon",{attrs:{size:"22",type:"arrow-up-c"}})],1),t._v(" "),a("Button",{staticStyle:{padding:"0"},attrs:{disabled:s==t.pageList.length-1,type:"text",title:"下移"},on:{click:function(e){t.onPageDown(s)}}},[a("Icon",{attrs:{size:"22",type:"arrow-down-c"}})],1)],1)])])}),t._v(" "),a("li",[a("div",{staticClass:"listpage",staticStyle:{"line-height":"230px"}},[a("a",{on:{click:t.onAddPage}},[a("Icon",{attrs:{size:"90",color:"#80848f",type:"plus-round"}})],1)])])],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isLayerActiv,expression:"isLayerActiv"}],staticStyle:{width:"100%"}},[a("ul",t._l(t.layerList,function(e,s){return a("li",{key:s,on:{click:function(a){t.selectLayer(e)}}},[a("div",{staticClass:"list-layer",class:{"list-layer-activ":e===t.curLayer}},[a("i",{staticClass:"thumb-layer",attrs:{size:"16",type:"ios-copy"}}),t._v("\n                        "+t._s(e.activ)+"\n                    ")])])}))])])],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("xtiz")},"data-v-0e930422",null).exports,m=a("BO1k"),p=a.n(m),h={name:"colorPicker",props:{value:{type:String,required:!0},defaultColor:{type:String,default:"#000"},disabled:{type:Boolean,default:!1}},data:function(){return{openStatus:!1,hoveColor:null,tColor:["#000","#fff","#eeece1","#1e497b","#4e81bb","#e2534d","#9aba60","#8165a0","#47acc5","#f9974c"],colorConfig:[["#7f7f7f","#f2f2f2"],["#0d0d0d","#808080"],["#1c1a10","#ddd8c3"],["#0e243d","#c6d9f0"],["#233f5e","#dae5f0"],["#632623","#f2dbdb"],["#4d602c","#eaf1de"],["#3f3150","#e6e0ec"],["#1e5867","#d9eef3"],["#99490f","#fee9da"]],bColor:["#c21401","#ff1e02","#ffc12a","#ffff3a","#90cf5b","#00af57","#00afee","#0071be","#00215f","#72349d"],html5Color:this.value}},computed:{showPanelColor:function(){return this.hoveColor?this.hoveColor:this.showColor},showColor:function(){return this.value?this.value:this.defaultColor},colorPanel:function(){var t=[],e=!0,a=!1,s=void 0;try{for(var i,n=p()(this.colorConfig);!(e=(i=n.next()).done);e=!0){var o=i.value;t.push(this.gradient(o[1],o[0],5))}}catch(t){a=!0,s=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw s}}return t}},methods:{triggerHtml5Color:function(){this.$refs.html5Color.click()},updataValue:function(t){this.$emit("input",t),this.$emit("change",t),this.openStatus=!1},handleDefaultColor:function(){this.updataValue(this.defaultColor)},parseColor:function(t){if(4!==t.length)return t;t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]},rgbToHex:function(t,e,a){var s=(t<<16|e<<8|a).toString(16);return"#"+new Array(Math.abs(s.length-7)).join("0")+s},hexToRgb:function(t){t=this.parseColor(t);for(var e=[],a=1;a<7;a+=2)e.push(parseInt("0x"+t.slice(a,a+2)));return e},gradient:function(t,e,a){for(var s=this.hexToRgb(t),i=this.hexToRgb(e),n=(i[0]-s[0])/a,o=(i[1]-s[1])/a,l=(i[2]-s[2])/a,r=[],c=0;c<a;c++)r.push(this.rgbToHex(parseInt(n*c+s[0]),parseInt(o*c+s[1]),parseInt(l*c+s[2])));return r}},mounted:function(){var t=this;document.onclick=function(e){t.openStatus=!1}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"colorPicker",staticClass:"m-colorPicker",on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"colorBtn",class:{disabled:t.disabled},style:"background-color: "+t.showColor,on:{click:function(e){t.openStatus=!t.disabled}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.html5Color,expression:"html5Color"}],ref:"html5Color",attrs:{type:"color"},domProps:{value:t.html5Color},on:{change:function(e){t.updataValue(t.html5Color)},input:function(e){e.target.composing||(t.html5Color=e.target.value)}}}),t._v(" "),a("div",{staticClass:"box",class:{open:t.openStatus}},[a("div",{staticClass:"hd"},[a("div",{staticClass:"colorView",style:"background-color: "+t.showPanelColor}),t._v(" "),a("div",{staticClass:"defaultColor",on:{click:t.handleDefaultColor,mouseover:function(e){t.hoveColor=t.defaultColor},mouseout:function(e){t.hoveColor=null}}},[t._v("默认颜色")])]),t._v(" "),a("div",{staticClass:"bd"},[a("h3",[t._v("主题颜色")]),t._v(" "),a("ul",{staticClass:"tColor"},t._l(t.tColor,function(e){return a("li",{style:{backgroundColor:e},on:{mouseover:function(a){t.hoveColor=e},mouseout:function(e){t.hoveColor=null},click:function(a){t.updataValue(e)}}})})),t._v(" "),a("ul",{staticClass:"bColor"},t._l(t.colorPanel,function(e){return a("li",[a("ul",t._l(e,function(e){return a("li",{style:{backgroundColor:e},on:{mouseover:function(a){t.hoveColor=e},mouseout:function(e){t.hoveColor=null},click:function(a){t.updataValue(e)}}})}))])})),t._v(" "),a("h3",[t._v("标准颜色")]),t._v(" "),a("ul",{staticClass:"tColor"},t._l(t.bColor,function(e){return a("li",{style:{backgroundColor:e},on:{mouseover:function(a){t.hoveColor=e},mouseout:function(e){t.hoveColor=null},click:function(a){t.updataValue(e)}}})})),t._v(" "),a("h3",{on:{click:t.triggerHtml5Color}},[t._v("更多颜色...")])])])])},staticRenderFns:[]};var f=a("VU/8")(h,v,!1,function(t){a("Odzd")},"data-v-b7e91f62",null).exports,g={animatename:{fade:{title:"淡入淡出",fadeIn:"淡入",fadeInDown:"向下淡入",fadeInDownBig:"向下快速淡入",fadeInLeft:"向右淡入",fadeInLeftBig:"向右快速淡入",fadeInRight:"向左淡入",fadeInRightBig:"向左快速淡入",fadeInUp:"向上淡入",fadeInUpBig:"向上快速淡入",fadeOut:"淡出",fadeOutDown:"向下淡出",fadeOutDownBig:"向下快速淡出",fadeOutLeft:"向左淡出",fadeOutLeftBig:"向左快速淡出",adeOutRight:"向右淡出",fadeOutRightBig:"向右快速淡出",fadeOutUp:"向上淡出",fadeOutUpBig:"向上快速淡出"},bounce:{title:"弹跳类",bounceIn:"弹跳进入",bounceInDown:"向下弹跳进入",bounceInLeft:"向右弹跳进入",bounceInRight:"向左弹跳进入",bounceInUp:"向上弹跳进入",bounceOut:"弹跳退出",bounceOutDown:"向下弹跳退出",bounceOutLeft:"向左弹跳退出",bounceOutRight:"向右弹跳退出",bounceOutUp:"向上弹跳退出"},zoom:{title:"缩放类",zoomIn:"放大进入",zoomInDown:"向下放大进入",zoomInLeft:"向右放大进入",zoomInRight:"向左放大进入",zoomInUp:"向上放大进入",zoomOut:"缩小退出",zoomOutDown:"向下缩小退出",zoomOutLeft:"向左缩小退出",zoomOutRight:"向右缩小退出",zoomOutUp:"向上缩小退出"},rotate:{title:"旋转类",rotateIn:"顺时针旋转进入",rotateInDownLeft:"从左往下旋入",rotateInDownRight:"从右往下旋入",rotateInUpLeft:"从左往上旋入",rotateInUpRight:"从右往上旋入",rotateOut:"顺时针旋转退出",rotateOutDownLeft:"向左下旋出",rotateOutDownRight:"向右下旋出",rotateOutUpLeft:"向左上旋出",rotateOutUpRight:"向右上旋出"},flip:{title:"翻转类",flipInX:"水平翻转进入",flipInY:"垂直翻转进入",flipOutX:"水平翻转退出",flipOutY:"垂直翻转退出"},strong:{title:"强调类",bounce:"弹跳",flash:"闪烁",pulse:"脉冲",rubberBand:"橡皮筋",shake:"左右弱晃动",swing:"上下摆动",tada:"缩放摆动",wobble:"左右强晃动",jello:"拉伸抖动"}}},_={name:"BaseEditPlan",props:{elems:{type:Object}},data:function(){return{borderstyleList:[{label:"无",value:"none"},{label:"单实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"点状线",value:"dotted"},{label:"双实线",value:"double"},{label:"3D凹槽",value:"groove"},{label:"3D垄状",value:"ridge"},{label:"3D内阴影",value:"inset"},{label:"3D外阴影",value:"outset"}]}},methods:{toTypeform:function(t){switch(t){case"text":return"文本";case"pic":return"图片"}}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("Collapse",{attrs:{value:"1"}},[t._t("default"),t._v(" "),a("Panel",{attrs:{name:"1"}},[t._v("\n            基本属性\n            "),a("template",{slot:"content"},[a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("类型")]),t._v(" "),a("Col",{attrs:{span:"16"}},[t._v(t._s(t.toTypeform(t.elems.type)))])],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("X")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,size:"large"},model:{value:t.elems.left,callback:function(e){t.$set(t.elems,"left",e)},expression:"elems.left"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("Y")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,size:"large"},model:{value:t.elems.top,callback:function(e){t.$set(t.elems,"top",e)},expression:"elems.top"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("宽")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,size:"large"},model:{value:t.elems.width,callback:function(e){t.$set(t.elems,"width",e)},expression:"elems.width"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("高")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,size:"large"},model:{value:t.elems.height,callback:function(e){t.$set(t.elems,"height",e)},expression:"elems.height"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("旋转")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:0,max:359,"show-input":""},model:{value:t.elems.transform,callback:function(e){t.$set(t.elems,"transform",e)},expression:"elems.transform"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("透明度")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:1,max:100,"show-input":""},model:{value:t.elems.opacity,callback:function(e){t.$set(t.elems,"opacity",e)},expression:"elems.opacity"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("背景颜色")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("ColorPicker",{staticStyle:{"margin-left":"35px"},attrs:{size:"large",recommend:"",alpha:""},model:{value:t.elems.bgColor,callback:function(e){t.$set(t.elems,"bgColor",e)},expression:"elems.bgColor"}})],1)],1)],1)],2),t._v(" "),a("Panel",{attrs:{name:"2"}},[t._v("\n            边框属性\n            "),a("template",{slot:"content"},[a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("样式")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Select",{model:{value:t.elems.borderStyle,callback:function(e){t.$set(t.elems,"borderStyle",e)},expression:"elems.borderStyle"}},t._l(t.borderstyleList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("颜色")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("ColorPicker",{staticStyle:{"margin-left":"35px"},attrs:{size:"large",recommend:""},model:{value:t.elems.borderColor,callback:function(e){t.$set(t.elems,"borderColor",e)},expression:"elems.borderColor"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("宽度")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:1,max:50,"show-input":""},model:{value:t.elems.borderWidth,callback:function(e){t.$set(t.elems,"borderWidth",e)},expression:"elems.borderWidth"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("圆角")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:1,max:50,"show-input":""},model:{value:t.elems.borderRadius,callback:function(e){t.$set(t.elems,"borderRadius",e)},expression:"elems.borderRadius"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("高")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,size:"large"}})],1)],1)],1)],2),t._v(" "),a("Panel",{attrs:{name:"3"}},[t._v("\n            阴影属性\n            "),a("template",{slot:"content"},[a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("X位置")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:-50,max:50,"show-input":""},model:{value:t.elems.boxShadow_h,callback:function(e){t.$set(t.elems,"boxShadow_h",e)},expression:"elems.boxShadow_h"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("Y位置")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:-50,max:50,"show-input":""},model:{value:t.elems.boxShadow_v,callback:function(e){t.$set(t.elems,"boxShadow_v",e)},expression:"elems.boxShadow_v"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("模糊")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:0,max:100,"show-input":""},model:{value:t.elems.boxShadow_sp,callback:function(e){t.$set(t.elems,"boxShadow_sp",e)},expression:"elems.boxShadow_sp"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("颜色")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("ColorPicker",{staticStyle:{"margin-left":"35px"},attrs:{size:"large",recommend:"",alpha:""},model:{value:t.elems.boxShadow_color,callback:function(e){t.$set(t.elems,"boxShadow_color",e)},expression:"elems.boxShadow_color"}})],1)],1)],1)],2)],2)],1)},staticRenderFns:[]};var C=a("VU/8")(_,w,!1,function(t){a("2kqF")},null,null).exports,y=(a("oFuF"),{name:"img-modals",props:{value:{type:Boolean,default:!1}},data:function(){return{modal_preView:!1,baseHost:n.a+"/",uploadUrl:n.a+"api/edit/files/upload/",defaultList:[],uploadList:[],pageList:[],visible:!1,curSum:0,curPage:1,curMenu:"themeUpimg_List"}},watch:{value:function(t){this.modal_preView=t},themeUpimg_List:function(t,e){console.log("数据变好了："+t),console.log("数据变好了o："+e)}},created:function(){},computed:{editorTheme:function(){return this.$store.state.editor.editorTheme},userinfo:function(){return this.$store.state.user.userinfo},userUpimg_List:function(){return this.$store.state.editor.userUpimg_List},themeUpimg_List:function(){return this.$store.state.editor.themeUpimg_List},publicUpimg_List:function(){return this.$store.state.editor.publicUpimg_List}},mounted:function(){console.log("enter edit")},methods:{onVisibleChange:function(t){t?this.updateImgList():this.$emit("input",t)},updateImgList:function(t){var e=this;t?this.$store.dispatch(this.curMenu,{pageSize:20,pageIndex:this.curPage}).then(function(){e.$nextTick(function(){console.log("刷新数据"),e.uploadList=e[e.curMenu].data[e.curPage],e.curSum=e[e.curMenu].count,console.log(e.curSum)})}).catch(function(t){e.uploadList=[],e.$store.commit("IMG_CLAER_DATA",e.curMenu),e.curSum=0}):this[this.curMenu].data[this.curPage]?this.$nextTick(function(){e.uploadList=e[e.curMenu].data[e.curPage]}):this.$store.dispatch(this.curMenu,{pageSize:20,pageIndex:this.curPage}).then(function(){e.$nextTick(function(){e.uploadList=e[e.curMenu].data[e.curPage],e.curSum=e[e.curMenu].count,console.log(e.curSum)})}).catch(function(t){e.uploadList=[],e.$store.commit("IMG_CLAER_DATA",e.curMenu),e.curSum=0})},handleRemove:function(t){var e=this;this.$Modal.confirm({title:"提示 - 预览和删除",okText:"取消",cancelText:"确定删除",render:function(a){return a("img",{attrs:{src:e.baseHost+t.fileUrl},style:{width:"100%",marginTop:"8px"}})},onOk:function(){},onCancel:function(){e.$store.dispatch("deleteImg",t._id).then(function(){e.$store.commit("DEL_DELTE_IMG",e.curMenu),e.uploadList=[],e.updateImgList(!0),console.log("删除错误aa")}).catch(function(){e.$Message.error("删除错误")})}})},handleSuccess:function(t,e){this.uploadList.unshift(t.body),this.uploadList.length>20&&this.uploadList.pop(),this.curSum++,this.$store.commit("ADD_UPLOAD_IMG",this.curMenu)},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确。",desc:"文件格式 "+t.name+" 不正确，请选择JPG或PNG."})},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件  "+t.name+" 太大，不超过2M。"})},handleBeforeUpload:function(){console.log("长度： "+this.$refs.upload.fileList.length);var t=this.uploadList.length<5;return t||this.$Notice.warning({title:"每次最多可以上传五张图片。"}),t},onBtnUpload:function(){this.onPageChange(1)},onMenuSelectEvent:function(t){this.curPage=1,this.curMenu=t,console.log(t),this.updateImgList(!0)},onPageChange:function(t){this.curPage=Number(t),this.updateImgList(!1)},onBtnSelectImg:function(t){this.$emit("selectimg",t),this.modal_preView=!1}}}),b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticStyle:{"z-index":"9999"},attrs:{title:"选择图片","mask-closable":!1,width:"828",footerHide:!0},on:{"on-visible-change":t.onVisibleChange},model:{value:t.modal_preView,callback:function(e){t.modal_preView=e},expression:"modal_preView"}},[a("Row",[a("Col",{staticClass:"leftmenu",attrs:{span:"4"}},[a("Menu",{staticStyle:{width:"auto"},attrs:{theme:"light","active-name":t.curMenu},on:{"on-select":t.onMenuSelectEvent}},[a("MenuItem",{attrs:{name:"themeUpimg_List"}},[a("Icon",{attrs:{type:"ios-compose"}}),t._v("项目资源")],1),t._v(" "),a("MenuItem",{attrs:{name:"userUpimg_List"}},[a("Icon",{attrs:{type:"android-home"}}),t._v("我的图片")],1),t._v(" "),a("MenuItem",{attrs:{name:"publicUpimg_List"}},[a("Icon",{attrs:{type:"chatbubbles"}}),t._v("公用图片")],1)],1),t._v(" "),a("Upload",{directives:[{name:"show",rawName:"v-show",value:"publicUpimg_List"!=t.curMenu,expression:"curMenu != 'publicUpimg_List'"}],ref:"upload",staticStyle:{"margin-top":"60px"},attrs:{name:"uploadFile",action:t.uploadUrl+t.userinfo._id+"/"+t.editorTheme._id,"show-upload-list":!1,"default-file-list":t.defaultList,"max-size":2048,"on-success":t.handleSuccess,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,multiple:"",format:["jpg","jpeg","png"]}},[a("Button",{staticStyle:{position:"absolute",bottom:"0"},attrs:{type:"primary",size:"large",long:""},on:{click:t.onBtnUpload}},[t._v("上传图片")])],1)],1),t._v(" "),a("Col",{staticClass:"leftmenu",attrs:{span:"20"}},[a("div",{staticStyle:{width:"100%",margin:"0 auto"}},[a("div",{staticStyle:{"margin-left":"16px","text-align":"left"}},t._l(t.uploadList,function(e){return a("div",{staticClass:"img-upload-list"},[[a("img",{attrs:{src:t.baseHost+e.fileUrl}}),t._v(" "),a("div",{staticClass:"img-upload-list-cover"},[a("a",{on:{click:function(a){t.handleRemove(e)}}},[a("Icon",{attrs:{size:"28",type:"eye"}})],1),t._v(" "),a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:function(a){t.onBtnSelectImg(e)}}},[t._v("使用")])],1)]],2)}))]),t._v(" "),a("Page",{staticClass:"pageindex",attrs:{current:t.curPage,total:t.curSum,"page-size":20,size:"small"},on:{"on-change":t.onPageChange}})],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(y,b,!1,function(t){a("THia")},"data-v-c1ae3c7a",null).exports,E={name:"TextEditPlan",components:{BaseEdit:C,imgModal:x},props:{elems:{type:Object},editorElement:{type:Object}},data:function(){return{isPageActiv:!0,isLayerActiv:!1,imgModal:!1,caryHost:n.a}},methods:{eleSelectimg:function(t){this.elems.imgSrc=t.fileUrl}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("BaseEdit",{attrs:{elems:t.elems}},[a("Panel",{attrs:{name:"1"}},[t._v("\n            图片属性\n            "),a("template",{slot:"content"},[a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("图片")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Row",[a("Col",{staticClass:"p-img-icon",attrs:{span:"12"}},[a("img",{staticStyle:{margin:"0 auto"},attrs:{src:t.caryHost+t.elems.imgSrc,alt:"",height:"100%"}})]),t._v(" "),a("Col",{staticStyle:{"line-height":"80px"},attrs:{span:"12"}},[a("Button",{on:{click:function(e){t.imgModal=!0}}},[t._v("更换")])],1)],1)],1)],1)],1)],2)],1),t._v(" "),a("imgModal",{on:{selectimg:t.eleSelectimg},model:{value:t.imgModal,callback:function(e){t.imgModal=e},expression:"imgModal"}})],1)},staticRenderFns:[]};var I=a("VU/8")(E,S,!1,function(t){a("iz1H")},"data-v-1bf03a86",null).exports,P={name:"TextEditPlan",components:{BaseEdit:C},props:{elems:{type:Object},editorElement:{type:Object}},data:function(){return{isPageActiv:!0,isLayerActiv:!1,imgModal:!1}},methods:{eleSelectimg:function(t){this.elems.imgSrc=t.fileUrl}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("BaseEdit",{attrs:{elems:t.elems}},[a("Panel",{attrs:{name:"1"}},[t._v("\n            文本属性\n            "),a("template",{slot:"content"},[a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("文本")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:2},placeholder:"输入文本内容..."},model:{value:t.elems.text,callback:function(e){t.$set(t.elems,"text",e)},expression:"elems.text"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("对齐")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.elems.textAlign,callback:function(e){t.$set(t.elems,"textAlign",e)},expression:"elems.textAlign"}},[a("Radio",{attrs:{label:"left"}},[t._v("左")]),t._v(" "),a("Radio",{attrs:{label:"center"}},[t._v("中")]),t._v(" "),a("Radio",{attrs:{label:"right"}},[t._v("右")])],1)],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("行高")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{min:0,size:"large"},model:{value:t.elems.lineHeight,callback:function(e){t.$set(t.elems,"lineHeight",e)},expression:"elems.lineHeight"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("字体")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Select",{model:{value:t.elems.fontWeight,callback:function(e){t.$set(t.elems,"fontWeight",e)},expression:"elems.fontWeight"}},[a("Option",{attrs:{value:"normal"}},[t._v("正常")]),t._v(" "),a("Option",{attrs:{value:"bold"}},[t._v("粗体")]),t._v(" "),a("Option",{attrs:{value:"lighter"}},[t._v("更细")])],1)],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("大小")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:0,max:100,"show-input":""},model:{value:t.elems.fontSize,callback:function(e){t.$set(t.elems,"fontSize",e)},expression:"elems.fontSize"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("颜色")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("ColorPicker",{staticStyle:{"margin-left":"35px"},attrs:{size:"large",recommend:""},model:{value:t.elems.color,callback:function(e){t.$set(t.elems,"color",e)},expression:"elems.color"}})],1)],1)],1)],2)],1)],1)},staticRenderFns:[]};var k={name:"page-and-layer",components:{colorPicker:f,ImgEditPlan:I,TextEditPlan:a("VU/8")(P,L,!1,function(t){a("fI1o")},"data-v-10f6fcb4",null).exports},props:[],data:function(){return{isPageActiv:!0,isLayerActiv:!1,animnameList:g.animatename,animList:[],animListActiv:"0"}},created:function(){},computed:{editorElement:function(){return this.$store.state.editor.editorElement||{}}},mounted:function(){},methods:{onlayer:function(){this.isLayerActiv||(this.isPageActiv=!this.isPageActiv,this.isLayerActiv=!this.isLayerActiv)},onPage:function(){this.isPageActiv||(this.isLayerActiv=!this.isLayerActiv,this.isPageActiv=!this.isPageActiv)},onAddAnimate:function(){var t=this;this.animList.push({animN:"",animease:"ease",animduration:0,animdelay:0,animcount:0,animloop:!1,animdirection:!1}),this.$nextTick(function(){t.animListActiv=(t.animList.length-1).toString()})},onPreviewAnimate:function(){this.$store.commit("PLAY_ANIMATE")},onanimDelete:function(t,e){e.stopPropagation(),this.animList.splice(t,1)}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%",width:"100%"}},[a("Row",[a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[a("div",{staticClass:"c-left-tab-text",class:{"c-layout-tab-n":!t.isPageActiv,"c-layout-tab-activ":t.isPageActiv},staticStyle:{"margin-right":"0.5px"},on:{click:t.onPage}},[t._v("属性")])]),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"12"}},[a("div",{staticClass:"c-left-tab-text",class:{"c-layout-tab-n":!t.isLayerActiv,"c-layout-tab-activ":t.isLayerActiv},staticStyle:{"margin-left":"0.5px"},on:{click:t.onlayer}},[t._v("动画")])])],1),t._v(" "),a("div",{staticClass:"c-left-tab-page custom-scrollbar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isPageActiv,expression:"isPageActiv"}],staticStyle:{width:"100%"}},["pic"===t.editorElement.type?a("ImgEditPlan",{attrs:{elems:t.editorElement},on:{"update:elems":function(e){t.editorElement=e}}}):t._e(),t._v(" "),"text"===t.editorElement.type?a("TextEditPlan",{attrs:{elems:t.editorElement},on:{"update:elems":function(e){t.editorElement=e}}}):t._e()],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isLayerActiv,expression:"isLayerActiv"}],staticStyle:{width:"100%"}},[t.editorElement.type?a("div",[a("Collapse",{attrs:{value:"1",accordion:""}},[a("Panel",{attrs:{name:"1"}},[t._v("\n                       添加动画\n                       "),a("template",{slot:"content"},[a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("动画名称")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Select",{model:{value:t.editorElement.animatedName,callback:function(e){t.$set(t.editorElement,"animatedName",e)},expression:"editorElement.animatedName"}},[a("Option",{attrs:{value:""}},[t._v("无动画")]),t._v(" "),t._l(t.animnameList,function(e,s){return a("OptionGroup",{key:s,attrs:{label:e.title}},t._l(e,function(e,s){return"title"!=s?a("Option",{key:s,attrs:{value:s}},[t._v(t._s(e))]):t._e()}))})],2)],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("动画时长")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:0,max:20,step:.1,"show-input":""},model:{value:t.editorElement.duration,callback:function(e){t.$set(t.editorElement,"duration",e)},expression:"editorElement.duration"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("动画延时")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:0,max:20,step:.1,"show-input":""},model:{value:t.editorElement.delay,callback:function(e){t.$set(t.editorElement,"delay",e)},expression:"editorElement.delay"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("动画次数")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Slider",{attrs:{min:0,max:100,disabled:t.editorElement.loop,"show-input":""},model:{value:t.editorElement.count,callback:function(e){t.$set(t.editorElement,"count",e)},expression:"editorElement.count"}})],1)],1),t._v(" "),a("Row",{staticClass:"c-row-margin",attrs:{gutter:8}},[a("Col",{staticClass:"c-col-left",attrs:{span:"6"}},[t._v("动画循环")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("i-switch",{model:{value:t.editorElement.loop,callback:function(e){t.$set(t.editorElement,"loop",e)},expression:"editorElement.loop"}})],1)],1)],1)],2)],1),t._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","margin-top":"12px"}},[a("Row",{attrs:{gutter:8}},[a("Col",{staticStyle:{"padding-right":"12px","padding-left":"12px"},attrs:{span:"24"}},[a("Button",{attrs:{type:"success",long:""},on:{click:t.onPreviewAnimate}},[t._v("预览动画")])],1)],1)],1)],1):t._e()])])],1)},staticRenderFns:[]};var A=a("VU/8")(k,$,!1,function(t){a("fQ+B")},"data-v-7924624e",null).exports,R={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"operate"},[a("div",{staticClass:"operate-hor-line"}),t._v(" "),a("div",{staticClass:"operate-ver-line"}),t._v(" "),a("div",{staticClass:"scale scale-nw",attrs:{"data-direction":"nw"}}),t._v(" "),a("div",{staticClass:"scale scale-ne",attrs:{"data-direction":"ne"}}),t._v(" "),a("div",{staticClass:"scale scale-sw",attrs:{"data-direction":"sw"}}),t._v(" "),a("div",{staticClass:"scale scale-se",attrs:{"data-direction":"se"}}),t._v(" "),a("div",{staticClass:"scale scale-n",attrs:{"data-direction":"n"}}),t._v(" "),a("div",{staticClass:"scale scale-e",attrs:{"data-direction":"e"}}),t._v(" "),a("div",{staticClass:"scale scale-s",attrs:{"data-direction":"s"}}),t._v(" "),a("div",{staticClass:"scale scale-w",attrs:{"data-direction":"w"}})])}]};var M={name:"pic-element",components:{Operate:a("VU/8")({name:"operate",props:[],created:function(){},mounted:function(){},methods:{}},R,!1,function(t){a("Kpup")},"data-v-31fd6eb1",null).exports},props:{element:{type:Object,request:!0},showOperate:{type:Boolean}},data:function(){return{left:0,top:0,width:0,height:0,curX:0,curY:0,flag:!1,scaleFlag:!1,direction:"",host:n.a+"/"}},computed:{styleBoder:function(){return{backgroundColor:this.element.bgColor,opacity:this.element.opacity/100,borderStyle:this.element.borderStyle,borderColor:this.element.borderColor,borderWidth:this.element.borderWidth+"px",borderRadius:this.element.borderRadius+"px",boxShadow:this.element.boxShadow_h+"px "+this.element.boxShadow_v+"px "+this.element.boxShadow_sp+"px "+this.element.boxShadow_color,animationIterationCount:this.element.loop?"infinite":"initial",animationDuration:this.element.duration+"s",animationDelay:this.element.delay+"s"}}},created:function(){},mounted:function(){var t=this.element.boxShadow_h+"px "+this.element.boxShadow_v+"px "+this.element.boxShadow_sp+"px "+this.element.boxShadow_color;console.log(t)},methods:{move:function(){var t=this;document.querySelector(".editor").onmousemove=function(e){var a=e||window.event;if(t.flag){var s=a.clientX,i=a.clientY,n=s-t.curX,o=i-t.curY;t.element.top=parseInt(t.top)+o,t.element.left=parseInt(t.left)+n}}},scaleMousemove:function(){var t=this;document.querySelector(".editor").onmouseup=function(e){t.scaleFlag=!1},document.querySelector(".editor").onmousemove=function(e){var a=e||window.event;if(t.scaleFlag){var s=a.clientX,i=a.clientY,n=s-t.curX,o=i-t.curY;switch(t.direction){case"w":parseInt(t.width)-n>=1&&(t.element.width=parseInt(t.width)-n,t.element.left=parseInt(t.left)+n);break;case"e":parseInt(t.width)+n>=1&&(t.element.width=parseInt(t.width)+n);break;case"n":parseInt(t.height)-o>=1&&(t.element.height=parseInt(t.height)-o,t.element.top=parseInt(t.top)+o);break;case"s":parseInt(t.height)+o>=1&&(t.element.height=parseInt(t.height)+o);break;case"nw":parseInt(t.height)-o>=3&&parseInt(t.width)-n>=3&&(t.element.width=parseInt(t.width)-n,t.element.left=parseInt(t.left)+n,t.element.height=parseInt(t.height)-o,t.element.top=parseInt(t.top)+o);break;case"sw":parseInt(t.height)+o>=3&&parseInt(t.width)-n>=3&&(t.element.width=parseInt(t.width)-n,t.element.left=parseInt(t.left)+n,t.element.height=parseInt(t.height)+o);break;case"ne":parseInt(t.height)-o>=3&&parseInt(t.width)+n>=3&&(t.element.height=parseInt(t.height)-o,t.element.top=parseInt(t.top)+o,t.element.width=parseInt(t.width)+n);break;case"se":parseInt(t.height)+o>=3&&(t.element.height=parseInt(t.height)+o,t.element.width=parseInt(t.width)+n)}}}},mousedown:function(t){2!==t.button&&(this.flag=!0,this.curX=t.clientX,this.curY=t.clientY,this.top=this.element.top,this.left=this.element.left,this.move())},mouseup:function(t){this.flag=!1,this.scaleFlag=!1},scaleMousedown:function(t){this.scaleFlag=!0,this.curX=t.clientX,this.curY=t.clientY,this.top=this.element.top,this.left=this.element.left,this.width=this.element.width,this.height=this.element.height,this.direction=t.target.getAttribute("data-direction"),this.scaleMousemove()},scaleMouseup:function(t){this.scaleFlag=!1}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap",on:{mousedown:t.mousedown,mouseup:t.mouseup}},[a("div",{staticClass:"img-box-edit",class:t.element.playing&&"animated "+this.element.animatedName,style:t.styleBoder},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.host+t.element.imgSrc},on:{dragstart:function(t){t.preventDefault()}}})]),t._v(" "),a("Operate",{directives:[{name:"show",rawName:"v-show",value:t.showOperate,expression:"showOperate"}],nativeOn:{mousedown:function(e){return e.stopPropagation(),t.scaleMousedown(e)},mouseup:function(e){return e.stopPropagation(),t.scaleMouseup(e)},mousemove:function(e){return e.stopPropagation(),t.scaleMousemove(e)}}})],1)},staticRenderFns:[]};var O=a("VU/8")(M,z,!1,function(t){a("jekj")},"data-v-7a088946",null).exports,U={props:["element"],methods:{mousedown:function(t,e){var a=t.clientX,s=t.clientY,i=this.element,n=i.height,o=i.width,l=i.top,r=i.left;console.log(t.target);var c=function(t){var c=t.clientX,u=t.clientY-s,d=c-a;switch(e){case"w":parseInt(o)-d>=10&&(i.width=parseInt(o)-d,i.left=parseInt(r)+d);break;case"e":parseInt(o)+d>=1&&(i.width=parseInt(o)+d);break;case"n":parseInt(n)-u>=1&&(i.top=parseInt(l)+u,i.height=parseInt(n)-u);break;case"s":parseInt(n)+u>=1&&(i.height=parseInt(n)+u);break;case"nw":parseInt(n)-u>=3&&parseInt(o)-d>=3&&(i.width=parseInt(o)-d,i.left=parseInt(r)+d,i.height=parseInt(n)-u,i.top=parseInt(l)+u);break;case"sw":parseInt(n)+u>=3&&parseInt(o)-d>=3&&(i.width=parseInt(o)-d,i.left=parseInt(r)+d,i.height=parseInt(n)+u);break;case"ne":parseInt(n)-u>=3&&parseInt(o)+d>=3&&(i.height=parseInt(n)-u,i.top=parseInt(l)+u,i.width=parseInt(o)+d);break;case"se":parseInt(n)+u>=3&&(i.height=parseInt(n)+u,i.width=parseInt(o)+d)}};document.addEventListener("mousemove",c),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",t)})}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"operate"},[a("div",{staticClass:"scale scale-nw",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"nw")}}}),t._v(" "),a("div",{staticClass:"scale scale-ne",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"ne")}}}),t._v(" "),a("div",{staticClass:"scale scale-sw",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"sw")}}}),t._v(" "),a("div",{staticClass:"scale scale-se",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"se")}}}),t._v(" "),a("div",{staticClass:"scale scale-n",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"n")}}}),t._v(" "),a("div",{staticClass:"scale scale-e",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"e")}}}),t._v(" "),a("div",{staticClass:"scale scale-s",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"s")}}}),t._v(" "),a("div",{staticClass:"scale scale-w",on:{mousedown:function(e){e.stopPropagation(),t.mousedown(e,"w")}}})])},staticRenderFns:[]};var B={name:"TextElement",components:{Operate:a("VU/8")(U,T,!1,function(t){a("F5V1")},"data-v-5cb4dab0",null).exports},props:["element"],computed:{curEle:function(){return this.$store.state.editor.editorElement},styleAnim:function(){return{animationIterationCount:this.element.loop?"infinite":"initial",animationDuration:this.element.duration+"s",animationDelay:this.element.delay+"s"}},styleBasic:function(){return{lineHeight:this.element.lineHeight,color:this.element.color,textAlign:this.element.textAlign,fontSize:this.element.fontSize+"px",fontWeight:this.element.fontWeight,fontFamily:this.element.fontFamily,opacity:this.element.opacity/100}},styleBoder:function(){return{backgroundColor:this.element.bgColor,opacity:this.element.opacity/100,borderStyle:this.element.borderStyle,borderColor:this.element.borderColor,borderWidth:this.element.borderWidth+"px",borderRadius:this.element.borderRadius+"px",boxShadow:this.element.boxShadow_h+"px "+this.element.boxShadow_v+"px "+this.element.boxShadow_sp+"px "+this.element.boxShadow_color,animationIterationCount:this.element.loop?"infinite":"initial",animationDuration:this.element.duration+"s",animationDelay:this.element.delay+"s"}}},methods:{mousedown:function(t){var e=this.element,a=t.clientY,s=t.clientX,i=e.top,n=e.left,o=function(t){var o=t.clientX,l=t.clientY;e.top=l-a+i,e.left=o-s+n};document.addEventListener("mousemove",o),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t)})}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"element",on:{mousedown:t.mousedown}},[a("Operate",{directives:[{name:"show",rawName:"v-show",value:t.element===t.curEle,expression:"element === curEle"}],staticClass:"operate",attrs:{element:t.element}}),t._v(" "),a("div",{class:t.element.playing&&"animated "+this.element.animatedName,style:t.styleBoder},[a("div",{staticClass:"content "},[a("div",{style:t.styleBasic},[t._v(t._s(t.element.text))])])])],1)},staticRenderFns:[]};var N={name:"edit-panel",components:{PicElement:O,TextElement:a("VU/8")(B,D,!1,function(t){a("Pyra")},"data-v-bde6481a",null).exports},props:{elems:{type:Array},editorElement:{type:Object}},computed:{},data:function(){return{caryHost:n.a,eontextMenuData:[{title:"复制元素",name:"copy",icon:"ios-copy-outline"},{title:"删除元素",name:"delete",icon:"ios-trash-outline"},{title:null,name:null,icon:null},{title:"置于顶层",name:"uptop",icon:"ios-arrow-up"},{title:"上移一层",name:"upone",icon:"ios-arrow-up"},{title:null,name:null,icon:null},{title:"下移一层",name:"downone",icon:"ios-arrow-down"},{title:"置于底层",name:"downbottom",icon:"ios-arrow-down"}],element:{left:0,top:0,width:100,height:100,currentX:0,currentY:0,flag:!1,scaleFlag:!1,direction:"",imgSrc:n.a+"upload/5ad961afefe0e90ca35ffc92/img_b41b68f049df11e89a4e55d3491f4b3f.png"}}},created:function(){},mounted:function(){},methods:{showMenu:function(t,e){t.preventDefault(),this.$refs.contextmenu.show({top:t.clientY,left:t.clientX})},selectedEle:function(t,e){this.$store.commit("SET_CUR_EDITOR_ELEMENT",e)},onBackroundEvent:function(){this.$store.commit("CLEAR_CUR_ELEMENT")},onContextmenuEvent:function(t){switch(t){case"copy":this.$store.commit("ELE_COPY_ELEMENT");break;case"delete":this.$store.commit("DELETE_ELEMENT");break;case"uptop":this.$store.commit("ELE_CUR_UP_TOP");break;case"upone":this.$store.commit("ELE_CUR_UP_ONE");break;case"downone":this.$store.commit("ELE_CUR_DOWN_ONE");break;case"downbottom":this.$store.commit("ELE_CUR_DOWN_TOP")}console.log(" 右键的名字："+t)}}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"page-bg",on:{click:t.onBackroundEvent}}),t._v(" "),a("v-contextmenu",{ref:"contextmenu"},[t._l(t.eontextMenuData,function(e){return[e.name?a("v-contextmenu-item",{on:{click:function(a){t.onContextmenuEvent(e.name)}}},[a("Icon",{attrs:{type:e.icon,size:"18"}}),t._v("\n                 "+t._s(e.title)+"\n            ")],1):a("v-contextmenu-item",{attrs:{divider:""}})]})],2),t._v(" "),t._l(t.elems,function(e){return[a("div",{on:{mousedown:function(a){t.selectedEle(a,e)},contextmenu:function(a){t.showMenu(a,e)}}},["pic"===e.type?a("PicElement",{style:{zIndex:e.zindex,width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",transform:"rotate("+e.transform+"deg)"},attrs:{element:e,showOperate:t.editorElement==e}}):t._e(),t._v(" "),"text"===e.type?a("TextElement",{style:{zIndex:e.zindex,top:e.top+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px",transform:"rotate("+e.transform+"deg)"},attrs:{element:e}}):t._e()],1)]})],2)},staticRenderFns:[]};var F={name:"edit",components:{PageAndLayer:d,ProPertyLayer:A,EditPanelLayer:a("VU/8")(N,V,!1,function(t){a("rztu")},"data-v-087782eb",null).exports,imgModal:x,Perview:a("ms/J").a,PerviewPage:r},data:function(){return{isPageActiv:!0,isLayerActiv:!1,canvasWidth:320,canvasHeight:504,imgModal:!1,saveloading:!1,itemId:null,modal_preView:!1,h5item:{title:"title",description:"des"}}},created:function(){var t=this;this.itemId=this.$route.query.itemId,this.itemId&&this.$store.dispatch("pageFindOne",this.itemId).then(function(){}).catch(function(e){t.$Message.error("获取编辑数据"),t.$router.go(-1)})},computed:{themeId:function(){return this.$store.state.editor.editorTheme._id},editorPage:function(){return this.$store.state.editor.editorPage},editorElement:function(){return this.$store.state.editor.editorElement||{}},editorTheme:function(){return this.$store.state.editor.editorTheme}},mounted:function(){},methods:{onBtnBackEvent:function(){},onSaveEvent:function(){var t=this;this.saveloading=!0,console.log(this.itemId);var e=JSON.parse(i()(this.$store.state.editor.editorTheme));this.$store.dispatch("saveTheme",e).then(function(e){setTimeout(function(){t.saveloading=!1},300)})},onSettingEvent:function(){this.modal_preView=!0,this.h5item=this.editorTheme},onlayer:function(){this.isPageActiv=!this.isPageActiv,this.isLayerActiv=!this.isLayerActiv},onPage:function(){this.isLayerActiv=!this.isLayerActiv,this.isPageActiv=!this.isPageActiv},onBackroundEvent:function(){this.$store.commit("CLEAR_CUR_ELEMENT")},eleSelectimg:function(t){var e={type:"pic",width:t.width,height:t.height,imgSrc:t.fileUrl};this.$store.commit("ELE_ADD_TEXT",e)},eleTextBtn:function(){var t={type:"text",text:"请输入文本",width:this.canvasWidth,height:42,lineHeight:1.5};this.$store.commit("ELE_ADD_TEXT",t)},eleShapeBtn:function(){this.$Message.warning("正在努力搭建")}},destroyed:function(){this.$store.commit("CLEAR_EDIT_THEME")}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editor"},[a("Layout",{staticClass:"editor-layout"},[a("Header",{staticStyle:{"padding-left":"20px",height:"60px","padding-right":"20px"}},[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[a("span",{staticClass:"layout-left-icon"},[a("a",{on:{click:t.onBtnBackEvent}},[a("Icon",{staticClass:"back-icon",attrs:{color:"#fff",size:"28",type:"chevron-left"}})],1),t._v(" "),a("div",{staticClass:"layout-logo"},[a("span",{staticStyle:{width:"100%",position:"absolute",left:"0","line-height":"32px"}},[t._v("编辑工具")])])]),t._v(" "),a("span",{staticClass:"c-layout-componetns-icon"},[a("Button",{attrs:{type:"dashed",title:"文字"},on:{click:t.eleTextBtn}},[a("Icon",{attrs:{type:"compose",color:"#e9eaec",size:"28"}})],1),t._v(" "),a("Button",{attrs:{type:"dashed",title:"图片"},on:{click:function(e){t.imgModal=!0}}},[a("Icon",{attrs:{type:"image",color:"#e9eaec",size:"28"}})],1),t._v(" "),a("Button",{attrs:{type:"dashed",title:"形状"},on:{click:t.eleShapeBtn}},[a("Icon",{attrs:{type:"star",color:"#e9eaec",size:"28"}})],1),t._v(" "),a("Button",{attrs:{type:"dashed",title:"视频"}},[a("Icon",{attrs:{type:"play",color:"#e9eaec",size:"28"}})],1)],1),t._v(" "),a("span",{staticClass:"layout-btn"},[a("Button",{staticStyle:{display:"inline-block"},attrs:{type:"primary",loading:t.saveloading},on:{click:t.onSaveEvent}},[t.saveloading?a("span",[t._v("保存中...")]):a("span",[t._v("保存")])]),t._v(" "),a("Button",{staticStyle:{display:"inline-block"},attrs:{type:"primary"},on:{click:t.onSettingEvent}},[t._v("设置预览")])],1)])],1),t._v(" "),a("Content",{staticClass:"c-layout-content"},[a("div",{staticClass:"brake-click",on:{click:t.onBackroundEvent,contextmenu:function(t){t.preventDefault()}}}),t._v(" "),a("div",{staticClass:"c-layout-left-page"},[a("PageAndLayer")],1),t._v(" "),a("div",{staticClass:"c-layout-content-stage"},[a("EditPanelLayer",{attrs:{elems:t.editorPage.elements,editorElement:t.editorElement},on:{"update:elems":function(e){t.$set(t.editorPage,"elements",e)}}})],1),t._v(" "),a("div",{staticClass:"c-layout-right-control"},[a("ProPertyLayer")],1)])],1),t._v(" "),a("imgModal",{on:{selectimg:t.eleSelectimg},model:{value:t.imgModal,callback:function(e){t.imgModal=e},expression:"imgModal"}}),t._v(" "),a("Perview",{attrs:{theme:t.h5item},model:{value:t.modal_preView,callback:function(e){t.modal_preView=e},expression:"modal_preView"}})],1)},staticRenderFns:[]};var Y=a("VU/8")(F,H,!1,function(t){a("8Q/J")},"data-v-6e54fef6",null);e.default=Y.exports},"8Q/J":function(t,e){},BO1k:function(t,e,a){t.exports={default:a("fxRn"),__esModule:!0}},F5V1:function(t,e){},Kpup:function(t,e){},Odzd:function(t,e){},Pyra:function(t,e){},THia:function(t,e){},fI1o:function(t,e){},"fQ+B":function(t,e){},fxRn:function(t,e,a){a("+tPU"),a("zQR9"),t.exports=a("g8Ux")},g8Ux:function(t,e,a){var s=a("77Pl"),i=a("3fs2");t.exports=a("FeBl").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return s(e.call(t))}},iz1H:function(t,e){},jekj:function(t,e){},rztu:function(t,e){},xtiz:function(t,e){},yxIz:function(t,e){}});
//# sourceMappingURL=3.6c6e779d1ce86fbb5a61.js.map